---
title: "Boxplot"
format: html
editor: visual
---

## Libraries

Download necessary libraries

```{r}
library(tidyverse)
library(googlesheets4)
library(dplyr)
library(ggplot2)
```

## Download data

Get data from Google sheets

```{r}
ss <- "https://docs.google.com/spreadsheets/d/1RefL2DMmCoOjCcIiaYgSnuDF34ORQFAZKu3nkaoS6o8/edit?gid=1138676736#gid=1138676736"
df_raw <- read_sheet(ss, sheet = "Projects_2")
df <- df_raw %>% janitor::clean_names()
```

## Filter and plot

Filter out countries and MW from data set, remove extreme outliers and plot a boxplot

```{r}
sel<- df %>% filter(electrolyser_consumption_mw !="N/A",         
  electrolyser_consumption_mw < 1000) %>% # Ta bort värden > 1000 
  select(country,electrolyser_consumption_mw)%>%
  mutate(electrolyser_consumption_mw = as.numeric(electrolyser_consumption_mw))
 
sel %>% ggplot(aes(x = country, y = electrolyser_consumption_mw, fill = country)) +
  geom_boxplot() +
  labs(x = "Country", y = "MW", title = "Electrolyser Consumption by Country") +
  theme_minimal() +
  theme(legend.position = "none")  # Valfritt, om du vill dölja legenden
```

Såhär ser den ut med outlyers

```{r}
sel<- df %>% filter(electrolyser_consumption_mw !="N/A")%>% # Ta bort värden > 1000 
  select(country,electrolyser_consumption_mw)%>%
  mutate(electrolyser_consumption_mw = as.numeric(electrolyser_consumption_mw))
 
sel %>% ggplot(aes(x = country, y = electrolyser_consumption_mw, fill = country)) +
  geom_boxplot() +
  labs(x = "Country", y = "MW", title = "Electrolyser Consumption by Country") +
  theme_minimal() +
  theme(legend.position = "none")  # Valfritt, om du vill dölja legenden
```

```{r}
# Filtrera, välj och förbered data
sel <- df %>% 
  filter(electrolyser_consumption_mw != "N/A") %>%  # Ta bort värden > 2000 
  select(country, electrolyser_consumption_mw) %>%
  mutate(electrolyser_consumption_mw = as.numeric(electrolyser_consumption_mw))

# Skapa boxplot med unika färger för varje land
sel %>% ggplot(aes(x = country, y = electrolyser_consumption_mw, fill = country)) +
  geom_boxplot(outlier.shape = NA) +
  labs(x = "Country", y = "MW", title = "Electrolyser Consumption by Country") +
  scale_y_continuous(limits = c(-5, 800)) + 
  theme_minimal() +
  theme(legend.position = "none")  # Valfritt, om du vill dölja legenden
```
